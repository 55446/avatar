
recalculate_age = {
	if = {
		limit = {
			count_triggers = {
				amount = 4
				has_tech = measurements
				has_tech = gravity
				has_tech = smelting
				has_tech = domestication
				has_tech = metaphysics
			}
		}
		set_variable = { tech_age = 2 }
		add_ideas = age_2_bonus
	}
	if = {
		limit = {
			count_triggers = {
				amount = 5
				has_tech = measurements
				has_tech = gravity
				has_tech = smelting
				has_tech = domestication
				has_tech = metaphysics
			}
		}
		set_variable = { tech_age_complete_1 = 1 }
	}

	if = {
		limit = {
			count_triggers = {
				amount = 4
				has_tech = geometry
				has_tech = astronomy
				has_tech = alchemy
				has_tech = agriculture
				has_tech = writing
			}
		}
		set_variable = { tech_age = 3 }
		remove_ideas = age_2_bonus
		add_ideas = age_3_bonus
	}
	if = {
		limit = {
			count_triggers = {
				amount = 5
				has_tech = geometry
				has_tech = astronomy
				has_tech = alchemy
				has_tech = agriculture
				has_tech = writing
			}
		}
		set_variable = { tech_age_complete_2 = 1 }
	}

	if = {
		limit = {
			count_triggers = {
				amount = 4
				has_tech = arithmetics
				has_tech = thermodynamics
				has_tech = conservation_of_mass
				has_tech = botanics
				has_tech = natural_philosophy
			}
		}
		set_variable = { tech_age = 4 }
		remove_ideas = age_2_bonus
		remove_ideas = age_3_bonus
		add_ideas = age_4_bonus
	}
	if = {
		limit = {
			count_triggers = {
				amount = 5
				has_tech = arithmetics
				has_tech = thermodynamics
				has_tech = conservation_of_mass
				has_tech = botanics
				has_tech = natural_philosophy
			}
		}
		set_variable = { tech_age_complete_3 = 1 }
	}

	if = {
		limit = {
			count_triggers = {
				amount = 4
				has_tech = statistics
				has_tech = aerodynamics
				has_tech = thermochemistry
				has_tech = heal_practices
				has_tech = printing_press
			}
		}
		set_variable = { tech_age = 5 }
		remove_ideas = age_2_bonus
		remove_ideas = age_3_bonus
		remove_ideas = age_4_bonus
		add_ideas = age_5_bonus
	}
	if = {
		limit = {
			count_triggers = {
				amount = 5
				has_tech = statistics
				has_tech = aerodynamics
				has_tech = thermochemistry
				has_tech = heal_practices
				has_tech = printing_press
			}
		}
		set_variable = { tech_age_complete_4 = 1 }
	}

	if = {
		limit = {
			count_triggers = {
				amount = 4
				has_tech = applied_mathematics
				has_tech = engines
				has_tech = atomic_theory
				has_tech = genetics
				has_tech = scientific_method
			}
		}
		set_variable = { tech_age = 6 }
		remove_ideas = age_2_bonus
		remove_ideas = age_3_bonus
		remove_ideas = age_4_bonus
		remove_ideas = age_5_bonus
		add_ideas = age_6_bonus
	}
	if = {
		limit = {
			count_triggers = {
				amount = 5
				has_tech = applied_mathematics
				has_tech = engines
				has_tech = atomic_theory
				has_tech = genetics
				has_tech = scientific_method
			}
		}
		set_variable = { tech_age_complete_5 = 1 }
	}

	if = {
		limit = {
			count_triggers = {
				amount = 5
				has_tech = abstract_mathematics
				has_tech = electromagnetism
				has_tech = periodic_table
				has_tech = biochemistry
				has_tech = social_sience
			}
		}
		set_variable = { tech_age_complete_6 = 1 }
	}


	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = age_1_bonus
					has_idea = age_2_bonus
					has_idea = age_3_bonus
					has_idea = age_4_bonus
					has_idea = age_5_bonus
					has_idea = age_6_bonus
				}
			}
		}
		add_ideas = age_1_bonus
	}
}
