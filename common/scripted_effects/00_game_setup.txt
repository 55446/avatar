
instant_resource_calc = {

	#resource_state_calc = yes

	add_dynamic_modifier = { modifier = additional_scripted_resources }
	add_dynamic_modifier = { modifier = missing_workers_state }
	add_dynamic_modifier = { modifier = urbanisation_modifiers }
	
	add_dynamic_modifier = { modifier = farm_scripted_resources }
	add_dynamic_modifier = { modifier = ranch_scripted_resources }
	add_dynamic_modifier = { modifier = fishing_stand_scripted_resources }
	add_dynamic_modifier = { modifier = lumber_mill_scripted_resources }
	add_dynamic_modifier = { modifier = quarry_scripted_resources }
	add_dynamic_modifier = { modifier = mine_scripted_resources }
	add_dynamic_modifier = { modifier = crop_weaving_scripted_resources }
	add_dynamic_modifier = { modifier = animal_weaving_scripted_resources }
	add_dynamic_modifier = { modifier = mill_scripted_resources }
	add_dynamic_modifier = { modifier = steelworks_scripted_resources }

	add_dynamic_modifier = { modifier = consumer_good_factory_scripted_resources }
	add_dynamic_modifier = { modifier = luxury_good_factory_scripted_resources }
	add_dynamic_modifier = { modifier = carpentry_scripted_resources }
	add_dynamic_modifier = { modifier = masonry_scripted_resources }
	add_dynamic_modifier = { modifier = steel_beam_factory_scripted_resources }


	add_dynamic_modifier = { modifier = needed_garrison_modifier }

	force_update_dynamic_modifier = yes
}

permanent_spirits_and_modifiers = {
	add_ideas = {
		strategic_redeployment_blocker
	}
	add_dynamic_modifier = { modifier = population_resource_bought_on_market }
	add_dynamic_modifier = { modifier = building_upkeep_resources }
	add_dynamic_modifier = { modifier = logistics_and_orga_spirit }
	add_dynamic_modifier = { modifier = wages_and_professionalism_spirit }
	add_dynamic_modifier = { modifier = unit_leader_spirit }
	set_variable = { spirit_army_orga = logistic_spirit_var }
	multiply_variable = { spirit_army_orga = 0.015 }
	subtract_from_variable = { spirit_army_orga = 0.1 }

	add_dynamic_modifier = { modifier = full_moon }

	force_update_dynamic_modifier = yes
}


bender_conscription_effect = {
	if = { 
		limit = {
			has_government = fire_culture
		}
		set_variable = { bender_percentage = 0.30 }
		add_dynamic_modifier = { modifier = fire_nation }
	}
	if = { 
		limit = {
			has_government = earth_culture
		}
		set_variable = { bender_percentage = 0.20 }
		add_dynamic_modifier = { modifier = earth_nation }
	}
	if = { 
		limit = {
			has_government = water_culture
		}
		set_variable = { bender_percentage = 0.40 }
		add_dynamic_modifier = { modifier = water_nation }
	}
	if = { 
		limit = {
			has_government = air_culture
		}
		set_variable = { bender_percentage = 1.0 }
		add_dynamic_modifier = { modifier = air_nation }
	}
	if = { 
		limit = {
			has_government = pluralist_culture
		}
		set_variable = { bender_percentage = 0.25 }
		add_dynamic_modifier = { modifier = pluralist_nation }
	}



	#### bender conscription law factor

	set_variable = { var_nonbender_factor = -1 }
	add_to_variable = { var_nonbender_factor = bender_percentage }

	set_variable = { nonbender_modifier = modifier@nonbender_factor }
	multiply_variable = { nonbender_modifier = -1 }
	clamp_variable = {
		var = nonbender_modifier
		min = 0
		max = 1
	}

	multiply_variable = { var_nonbender_factor = nonbender_modifier }

	add_dynamic_modifier = { modifier = dynamic_bender_capacity }
}

hemisphere_setup = {
	every_state = {
		limit = {
			OR = {
				is_on_continent = north_america
				is_on_continent = africa
				region = 96
				region = 97
				region = 98
				region = 99
				region = 114
				region = 116
				region = 117
				region = 118
				region = 121
				region = 126
			}
		}
		set_state_flag = northern_hemisphere
	}

	every_state = {
		limit = {
			OR = {
				is_on_continent = south_america
				is_on_continent = asia
				region = 129
				region = 105
				region = 102
				region = 115
				region = 106
			}
			NOT = {
				state = 394
				state = 367
			}
		}
		set_state_flag = southern_hemisphere
	}
	
}


fire_puppets_52 = {
	puppet = YFC
	puppet = KFC

	YFC = {
		set_imperial_colony_effect = yes
	}
	KFC = {
		set_imperial_colony_effect = yes
	}
}

fire_puppets_106 = {
	puppet = PFC
	puppet = HFC
	puppet = MFC
	puppet = GFC

	PFC = {
		set_imperial_colony_effect = yes
	}
	HFC = {
		set_imperial_colony_effect = yes
	}
	MFC = {
		set_imperial_colony_effect = yes
	}
	GFC = {
		set_imperial_colony_effect = yes
	}
}

fire_puppets_111 = {
	puppet = NAT
	NAT = {
		set_tributary_effect = yes
	}
}

fire_faction_52 = {
	FIR = {
		create_faction = Alliance_of_Fire
		add_to_faction = FIR
		add_to_faction = YFC
		add_to_faction = KFC
	}
}
fire_faction_106 = {
	FIR = {
		create_faction = Alliance_of_Fire
		add_to_faction = FIR
		add_to_faction = YFC
		add_to_faction = KFC
		add_to_faction = PFC
		add_to_faction = HFC
		add_to_faction = MFC
		add_to_faction = GFC
	}
}
fire_faction_111 = {
	FIR = {
		create_faction = Alliance_of_Fire
		add_to_faction = FIR
		add_to_faction = YFC
		add_to_faction = KFC
		add_to_faction = PFC
		add_to_faction = HFC
		add_to_faction = MFC
		add_to_faction = GFC
		add_to_faction = NAT
	}
}

war_setup_52 = {
	KFC = {
		add_to_war = {
			targeted_alliance = FIR
			enemy = EAR
		}
	}
	YFC = {
		add_to_war = {
			targeted_alliance = FIR
			enemy = EAR
		}
	}

}
war_setup_106 = {
	
	PFC = {
		add_to_war = {
			targeted_alliance = FIR
			enemy = EAR
		}
	}
	HFC = {
		add_to_war = {
			targeted_alliance = FIR
			enemy = EAR
		}
	}
	MFC = {
		add_to_war = {
			targeted_alliance = FIR
			enemy = EAR
		}
	}
	GFC = {
		add_to_war = {
			targeted_alliance = FIR
			enemy = EAR
		}
	}

}

taku_puppet_12 = {
	if = {
		limit = {
			has_start_date < 13.1.1
		}
		puppet = POH
		puppet = HAN
		POH = {
			set_county_effect = yes
		}
		HAN = {
			set_county_effect = yes
		}
	}
}

omashu_puppet_12 = {
	if = {
		limit = {
			has_start_date < 13.1.1
		}
		puppet = MPO
		puppet = GOU

		MPO = {
			set_tributary_effect = yes
		}
		GOU = {
			set_county_effect = yes
		}
	}
}

earth_faction_52 = {

	EAR = {
		create_faction = Earth_Kingdom
		add_to_faction = EAR
		add_to_faction = POH
		add_to_faction = TAK
		add_to_faction = HAN
		add_to_faction = MAK
		add_to_faction = NIX
		add_to_faction = YUE
		add_to_faction = XIN
		add_to_faction = GAR
		add_to_faction = WUL
		add_to_faction = NOW

		add_to_faction = HEB
		add_to_faction = ISL
		add_to_faction = NCB
		add_to_faction = ECB
		add_to_faction = EBA
		add_to_faction = WBA
		add_to_faction = LAM
		add_to_faction = GDD
		add_to_faction = FMB
		add_to_faction = MER

		add_to_faction = OMS
		add_to_faction = MPO
		add_to_faction = SWA
		add_to_faction = ZAO
		add_to_faction = CHN
		add_to_faction = GAO
		add_to_faction = NAN
		add_to_faction = ZIN
		add_to_faction = YII
		add_to_faction = BAI

		add_to_faction = YON
		add_to_faction = FUJ
		add_to_faction = SHE
		add_to_faction = XIL
		add_to_faction = GOU
		add_to_faction = DAW
		add_to_faction = DIN

		remove_from_faction = WUL
		remove_from_faction = MAK
		remove_from_faction = POH
		remove_from_faction = TAK
		remove_from_faction = HAN
		remove_from_faction = YUE
	}
}

earth_faction_106 = {

	EAR = {
		create_faction = Earth_Kingdom
		add_to_faction = EAR
		add_to_faction = POH
		add_to_faction = TAK
		add_to_faction = HAN
		add_to_faction = MAK
		add_to_faction = NIX
		add_to_faction = YUE
		add_to_faction = XIN
		add_to_faction = GAR
		add_to_faction = WUL
		add_to_faction = NOW

		add_to_faction = HEB
		add_to_faction = ISL
		add_to_faction = NCB
		add_to_faction = ECB
		add_to_faction = EBA
		add_to_faction = WBA
		add_to_faction = LAM
		add_to_faction = GDD
		add_to_faction = FMB
		add_to_faction = MER

		add_to_faction = OMS
		add_to_faction = MPO
		add_to_faction = SWA
		add_to_faction = ZAO
		add_to_faction = CHN
		add_to_faction = GAO
		add_to_faction = NAN
		add_to_faction = ZIN
		add_to_faction = YII
		add_to_faction = BAI

		add_to_faction = YON
		add_to_faction = FUJ
		add_to_faction = SHE
		add_to_faction = XIL
		add_to_faction = GOU
		add_to_faction = DAW
		add_to_faction = DIN
		
		remove_from_faction = WUL
		remove_from_faction = MAK
		remove_from_faction = POH
		remove_from_faction = TAK
		remove_from_faction = HAN
		remove_from_faction = YUE

		remove_from_faction = MER
		remove_from_faction = NOW
		remove_from_faction = NIX
		remove_from_faction = XIN
		remove_from_faction = GDD

		remove_from_faction = FUJ
		remove_from_faction = SHE
		remove_from_faction = XIL
	}
}


earth_faction_111 = {
	EAR = {
		create_faction = Earth_Kingdom
		add_to_faction = EAR
		add_to_faction = POH
		add_to_faction = TAK
		add_to_faction = HAN
		add_to_faction = MAK
		add_to_faction = NIX
		add_to_faction = YUE
		add_to_faction = XIN
		add_to_faction = GAR
		add_to_faction = WUL
		add_to_faction = NOW

		add_to_faction = HEB
		add_to_faction = ISL
		add_to_faction = NCB
		add_to_faction = ECB
		add_to_faction = EBA
		add_to_faction = WBA
		add_to_faction = LAM
		add_to_faction = GDD
		add_to_faction = FMB
		add_to_faction = MER

		add_to_faction = OMS
		add_to_faction = MPO
		add_to_faction = SWA
		add_to_faction = ZAO
		add_to_faction = CHN
		add_to_faction = GAO
		add_to_faction = NAN
		add_to_faction = ZIN
		add_to_faction = YII
		add_to_faction = BAI

		add_to_faction = YON
		add_to_faction = FUJ
		add_to_faction = SHE
		add_to_faction = XIL
		add_to_faction = GOU
		add_to_faction = DAW
		add_to_faction = DIN
		
		remove_from_faction = WUL
		remove_from_faction = MAK
		remove_from_faction = POH
		remove_from_faction = TAK
		remove_from_faction = HAN
		remove_from_faction = YUE

		remove_from_faction = WUL
		remove_from_faction = MAK
		remove_from_faction = POH
		remove_from_faction = TAK
		remove_from_faction = HAN
		remove_from_faction = YUE

		remove_from_faction = MER
		remove_from_faction = NOW
		remove_from_faction = NIX
		remove_from_faction = XIN
		remove_from_faction = GDD

		remove_from_faction = FUJ
		remove_from_faction = SHE
		remove_from_faction = XIL
	}
}

earth_puppets_12 = {
	puppet = WBA
	puppet = EBA
	puppet = BAI
	puppet = FMB
	puppet = LAM
	puppet = ECB
	puppet = GDD
	puppet = MER
	puppet = NIX
	puppet = XIN
	puppet = WUL
	puppet = HEB
	puppet = MAK
	puppet = YUE
	puppet = NOW
	puppet = NCB
	puppet = FUJ
	puppet = SHE
	puppet = XIL
	puppet = YON
	puppet = DIN
	puppet = DAW

	WBA = {
		set_royal_domain_effect = yes
	}
	EBA = {
		set_royal_domain_effect = yes
	}
	BAI = {
		set_county_effect = yes
	}
	FMB = {
		set_county_effect = yes
	}
	LAM = {
		set_county_effect = yes
	}
	ECB = {
		set_county_effect = yes
	}
	GDD = {
		set_county_effect = yes
	}
	MER = {
		set_county_effect = yes
	}
	NIX = {
		set_county_effect = yes
	}
	XIN = {
		set_county_effect = yes
	}
	WUL = {
		set_county_effect = yes
	}
	HEB = {
		set_county_effect = yes
	}
	MAK = {
		set_county_effect = yes
	}
	YUE = {
		set_county_effect = yes
	}
	NOW = {
		set_county_effect = yes
	}
	NCB = {
		set_county_effect = yes
	}
	FUJ = {
		set_county_effect = yes
	}
	SHE = {
		set_county_effect = yes
	}
	XIL = {
		set_county_effect = yes
	}
	YON = {
		set_county_effect = yes
	}
	DIN = {
		set_royal_domain_effect = yes
	}
	DAW = {
		set_royal_domain_effect = yes
	}
}


earth_puppets_52 = {
	
	earth_puppets_111 = yes
	
}

earth_puppets_106 = {
	
	earth_puppets_111 = yes
	
}

earth_puppets_111 = {
	
	puppet = OMS
	puppet = GAO
	puppet = YII
	puppet = YUE
	puppet = MPO
	puppet = SWA
	puppet = TAK
	puppet = ZAO
	puppet = CHN
	puppet = ISL
	puppet = NAN
	puppet = ZIN
	puppet = GAR
	puppet = POH
	puppet = WBA
	puppet = EBA
	puppet = BAI
	puppet = FMB
	puppet = LAM
	puppet = ECB
	puppet = GDD
	puppet = MER
	puppet = NIX
	puppet = XIN
	puppet = WUL
	puppet = HEB
	puppet = MAK
	puppet = NOW
	puppet = NCB
	puppet = HAN
	puppet = FUJ
	puppet = SHE
	puppet = XIL
	puppet = YON
	puppet = GOU
	puppet = DIN
	puppet = DAW


	OMS = {
		set_kingdom_effect = yes
	}
	GAO = {
		set_kingdom_effect = yes
	}
	YII = {
		set_county_effect = yes
	}
	YUE = {
		set_county_effect = yes
	}
	MPO = {
		set_tributary_effect = yes
	}
	SWA = {
		set_county_effect = yes
	}
	TAK = {
		set_kingdom_effect = yes
	}
	ZAO = {
		set_county_effect = yes
	}
	CHN = {
		set_county_effect = yes
	}
	ISL = {
		set_county_effect = yes
	}
	NAN = {
		set_county_effect = yes
	}
	ZIN = {
		set_county_effect = yes
	}
	GAR = {
		set_county_effect = yes
	}
	POH = {
		set_county_effect = yes
	}
	WBA = {
		set_royal_domain_effect = yes
	}
	EBA = {
		set_royal_domain_effect = yes
	}
	BAI = {
		set_county_effect = yes
	}
	FMB = {
		set_county_effect = yes
	}
	LAM = {
		set_county_effect = yes
	}
	ECB = {
		set_county_effect = yes
	}
	GDD = {
		set_county_effect = yes
	}
	MER = {
		set_county_effect = yes
	}
	NIX = {
		set_county_effect = yes
	}
	XIN = {
		set_county_effect = yes
	}
	WUL = {
		set_county_effect = yes
	}
	HEB = {
		set_county_effect = yes
	}
	MAK = {
		set_county_effect = yes
	}
	NOW = {
		set_county_effect = yes
	}
	NCB = {
		set_county_effect = yes
	}
	HAN = {
		set_county_effect = yes
	}
	FUJ = {
		set_county_effect = yes
	}
	SHE = {
		set_county_effect = yes
	}
	XIL = {
		set_county_effect = yes
	}
	YON = {
		set_county_effect = yes
	}
	GOU = {
		set_county_effect = yes
	}
	DIN = {
		set_royal_domain_effect = yes
	}
	DAW = {
		set_royal_domain_effect = yes
	}
	
}

ear_exiles_52 = {
	if = {
		limit = {
			has_dlc = "Man the Guns"
		}
		WUL = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		TAK = {
			become_exiled_in = { target = EAR legitimacy = 40 }
		}
		YUE = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		MAK = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		POH = {
			become_exiled_in = { target = EAR legitimacy = 35 }
		}
		HAN = {
			become_exiled_in = { target = EAR legitimacy = 35 }
		}
	}
}

ear_exiles_106 = {
	if = {
		limit = {
			has_dlc = "Man the Guns"
		}
		MER = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		GDD = {
			become_exiled_in = { target = EAR legitimacy = 20 }
		}
		NOW = {
			become_exiled_in = { target = EAR legitimacy = 35 }
		}
		XIN = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		NIX = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		FUJ = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		SHE = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		XIL = {
			become_exiled_in = { target = EAR legitimacy = 30 }
		}
		
		
	}
}