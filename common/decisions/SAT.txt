SAT_upcoming_war_category = {

	troubling_signs = {

		allowed = {
			TAG = SAT
			#always = no
		}

		available = {
			has_country_flag = fully_prepared
			NOT = {
				has_global_flag = air_nomad_genocide
			}
        }

        days_mission_timeout = 180
        is_good = no

		complete_effect = {
			add_war_support = 0.5
			add_stability = 0.5
		}

		timeout_effect = {
			custom_effect_tooltip = troubeling_signs_tt
		}

		cost = 10
        fire_only_once = yes
        ai_will_do = {
			factor = 100
		}
	}

	reveal_avatar_aang = {

		allowed = {
			TAG = SAT
		}

		available = {
			AND = {
				has_global_flag = avatar_aang
			}
        }

		complete_effect = {
			set_global_flag = monks_revealed_aang
			custom_effect_tooltip = reveal_avatar_aang_tt
		}

		cost = 10
        fire_only_once = yes
        ai_will_do = {
			factor = 100
		}
	}

	send_aang_to_the_eastern_temple = {

		allowed = {
			TAG = SAT
		}

		available = {
			AND = {
				has_global_flag = monks_revealed_aang
				NOT = {
					has_global_flag = keep_aang_here
				}
			}
        }
        visible = {
			AND = {
				has_global_flag = monks_revealed_aang
				NOT = {
					has_global_flag = keep_aang_here
				}
			}
		}

        days_remove = 30

		complete_effect = {
			set_global_flag = send_aang_away
		}

		remove_effect = {
			if = {
				limit = {
					has_global_flag = gyatso_and_aang_flee
				}
				SAT = { news_event = { id = news.8 } }
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = gyatso_and_aang_flee
					}
				}
				random_list = {
					25 = {
						SAT = { news_event = { id = news.7 } }
						modifier = {
							add = 75
							is_historical_focus_on = yes
						}
					}
					75 = {
						modifier = {
							factor = 0
							is_historical_focus_on = yes
						}
					}
				}

			}
		}

		cost = 50
        fire_only_once = yes
        ai_will_do = {
			factor = 100
		}
	}

	keep_avatar_aang_here = {

		allowed = {
			TAG = SAT
		}

		available = {
			AND = {
				has_global_flag = monks_revealed_aang
				NOT = {
					has_global_flag = send_aang_away
				}
			}
        }
        visible = {
			AND = {
				has_global_flag = monks_revealed_aang
				NOT = {
					has_global_flag = send_aang_away
				}
			}
		}

		complete_effect = {
			set_global_flag = keep_aang_here
			add_ideas = protecting_the_avatar
		}


		cost = 100
        fire_only_once = yes
        ai_will_do = {
			factor = 0
		}
	}

	gyatso_and_aang = {

		allowed = {
			TAG = SAT
		}

		visible = {
			has_global_flag = send_aang_away
		}

		available = {
			AND = {
				has_global_flag = send_aang_away
				has_decision = send_aang_to_the_eastern_temple
			}
        }

		complete_effect = {
			random_list = {
				25 = {
					SAT = { news_event = { id = news.7 } }
					modifier = {
						add = 75
						is_historical_focus_on = yes
					}
				}
				75 = {
					set_global_flag = gyatso_and_aang_flee
					custom_effect_tooltip = gyatso_and_aang_tt
					modifier = {
						factor = 0
						is_historical_focus_on = yes
					}
				}
			}
		}

		cost = 10
        fire_only_once = yes
        ai_will_do = {
			factor = 100
		}
	}
}

SAT_council_category = {
	upcoming_meeting = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		visible = { has_country_flag = SAT_council_active }
		available = {
			has_country_flag = meetings_disrupted
		}
		days_mission_timeout = 10
		days_re_enable = 0
		days_remove = 0
		is_good = yes
		priority = 1000
		
		timeout_effect = {
			custom_effect_tooltip = "The Council meets once again!"
			SAT_generate_missions = yes
			SAT = { country_event = { id = SAT_council.1 } }
		}
	}
	
	# increase / decrease decisions
	increase_military_priorities = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		visible = { has_country_flag = SAT_council_active }
		cost = 50
		days_re_enable = 0
		days_remove = 0
		
		complete_effect = {
			SAT = { country_event = { id = SAT_council.2}}
		}
	}
	increase_civilian_priorities = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		visible = { has_country_flag = SAT_council_active }
		cost = 50
		days_re_enable = 0
		days_remove = 0
		
		complete_effect = {
			SAT = { country_event = { id = SAT_council.3}}
		}
	}
	decrease_military_priorities = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		visible = { has_country_flag = SAT_council_active }
		cost = 50
		days_re_enable = 0
		days_remove = 0
		
		complete_effect = {
			SAT = { country_event = { id = SAT_council.4}}
		}
	}
	decrease_civilian_priorities = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		visible = { has_country_flag = SAT_council_active }
		cost = 50
		days_re_enable = 0
		days_remove = 0
		
		complete_effect = {
			SAT = { country_event = { id = SAT_council.5}}
		}
	}
	
	SAT_mission_nr1 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 1 }
		}
		
		is_good = yes
		cost = 50
		days_mission_timeout = 120
		days_remove = 0
		selectable_mission = yes
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr1_timeout
			hidden = {
				SAT_council_medium_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 1}
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr1_success
			hidden = {
				SAT_council_small_support = yes
			}
			add_manpower = 100
			remove_from_array = { SAT_current_missions = 1}
		}
	}
	
	SAT_mission_nr2 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 2 }
		}
		available = {
			command_power > 40
		}
		
		is_good = yes
		days_mission_timeout = 120
		days_remove = 0
		selectable_mission = yes
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr2_timeout
			hidden = {
				SAT_council_medium_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 2}
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr2_success
			hidden = {
				SAT_council_small_support = yes
			}
			add_command_power = -40
			army_experience  = 40
			remove_from_array = { SAT_current_missions = 2}
		}
	}
	
	SAT_mission_nr3 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 3 }
		}
		available = {
			always = yes
		}
		
		is_good = yes
		days_mission_timeout = 30
		days_remove = 0
		selectable_mission = yes
		cost = 30
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr3_timeout
			hidden = {
				SAT_council_medium_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 3 }
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr3_success
			hidden = {
				SAT_council_small_support = yes
			}
			remove_from_array = { SAT_current_missions = 3}
			army_experience = 15
		}
	}
	
	SAT_mission_nr6 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 6 }
		}
		available = {
			always = yes
		}
		
		is_good = yes
		days_mission_timeout = 100
		days_remove = 0
		selectable_mission = yes
		cost = 40
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr6_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 6}
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr6_success
			hidden = {
				SAT_council_small_support = yes
			}
			navy_experience = 25
			remove_from_array = { SAT_current_missions = 6}
		}
	}
	
	SAT_mission_nr7 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 7 }
		}
		
		is_good = yes
		days_mission_timeout = 100
		days_remove = 0
		selectable_mission = yes
		cost = 40
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr7_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 7}
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr7_success
			hidden = {
				SAT_council_small_support = yes
			}
			remove_from_array = { SAT_current_missions = 7}
			army_experience = 10
		}
	}
	
	SAT_mission_nr11 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 11 }
		}
		available = {
			always = yes
		}
		
		is_good = yes
		days_mission_timeout = 80
		days_remove = 0
		selectable_mission = yes
		cost = 30
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr11_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 11}
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr11_success
			hidden = {
				SAT_council_small_support = yes
			}
			air_experience = 20
			remove_from_array = { SAT_current_missions = 11}
		}
	}
	
	SAT_mission_nr16 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 16 }
		}
		available = {
			has_army_experience > 40
		}

		is_good = yes
		days_mission_timeout = 80
		days_remove = 0
		selectable_mission = yes

		timeout_effect = {
			custom_effect_tooltip  = mission_nr16_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 16}
		}

		complete_effect = {
			custom_effect_tooltip = mission_nr16_success
			hidden = {
				SAT_council_small_support = yes
			}
			army_experience = -40
			add_tech_bonus = {
				name = air_mission_nr16_reward
				ahead_reduction = 3
				uses = 1
				category = basic_weapons
			}
			remove_from_array = { SAT_current_missions = 16}
		}
	}

    SAT_mission_nr17 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 17 }
		}
		available = {
			has_navy_experience > 30
		}

		is_good = yes
		days_mission_timeout = 80
		days_remove = 0
		selectable_mission = yes

		timeout_effect = {
			custom_effect_tooltip  = mission_nr17_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 17}
		}

		complete_effect = {
			custom_effect_tooltip = mission_nr17_success
			hidden = {
				SAT_council_small_support = yes
			}
			navy_experience = -30
			add_tech_bonus = {
				name = air_mission_nr17_reward
				ahead_reduction = 3
				uses = 2
				category = {
				    nav_patrol
                    nav_raid
                    nav_screen
                    nav_capital
                    nav_wooden
                    nav_ironclad
				}
			}
			remove_from_array = { SAT_current_missions = 17}
		}
	}
	
	SAT_mission_nr26 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 26 }
		}
		available = {
			command_power > 30
		}
		
		is_good = yes
		days_mission_timeout = 80
		days_remove = 0
		selectable_mission = yes
		
		timeout_effect = {
			custom_effect_tooltip  = mission_nr26_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 26}
		}
		
		complete_effect = {
			custom_effect_tooltip = mission_nr26_success
			hidden = {
				SAT_council_small_support = yes
			}
			add_political_power  = 60
			add_command_power = -30
			remove_from_array = { SAT_current_missions = 26}
		}
	}

	SAT_mission_nr28 = {
   		allowed = { AND = {
   			tag = SAT
   			has_country_flag = SAT_council_active
   		}}
   		activation = {
   			is_in_array = { SAT_current_missions = 28 }
   		}
   		available = {
   			has_army_experience > 10
   			has_navy_experience > 10
   			has_air_experience > 10
   		}

   		is_good = yes
   		days_mission_timeout = 100
   		days_remove = 0
   		selectable_mission = yes

   		timeout_effect = {
   			custom_effect_tooltip  = mission_nr28_timeout
   			hidden = {
   				SAT_council_small_opposition = yes
   			}
   			remove_from_array = { SAT_current_missions = 28}
   		}

    	complete_effect = {
    		custom_effect_tooltip = mission_nr28_success
    		hidden = {
    			SAT_council_small_support = yes
    		}
    		army_experience = -10
    		navy_experience = -10
    		air_experience = -10
    		add_war_support = 0.1
    		remove_from_array = { SAT_current_missions = 28}
    	}
    }

	SAT_mission_nr29 = {
		allowed = { AND = {
			tag = SAT
			has_country_flag = SAT_council_active
		}}
		activation = {
			is_in_array = { SAT_current_missions = 29 }
		}

		is_good = yes
		days_mission_timeout = 80
		days_remove = 0
		selectable_mission = yes
		cost = 45

		timeout_effect = {
			custom_effect_tooltip  = mission_nr29_timeout
			hidden = {
				SAT_council_small_opposition = yes
			}
			remove_from_array = { SAT_current_missions = 29}
		}

		complete_effect = {
			custom_effect_tooltip = mission_nr29_success
			hidden = {
				SAT_council_small_support = yes
			}
			add_command_power = 30
			remove_from_array = { SAT_current_missions = 29}
		}
	}
}