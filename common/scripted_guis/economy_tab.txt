
scripted_gui = {

	production_tab_ui = {
		context_type = player_context
		window_name = "production_tab_ui_window"
		parent_window_token = production_tab

	}

	economy_tab_ui = {
		context_type = player_context
		window_name = "economy_tab_ui_window"
		parent_window_token = construction_tab

		triggers = {

			famine_icon_visible = {
				has_dynamic_modifier = { modifier = famine }
			}
			food_shortages_icon_visible = {
				has_dynamic_modifier = { modifier = food_shortages }
			}
			food_surplus_icon_visible = {
				has_dynamic_modifier = { modifier = food_surplus_idea }
			}
			burgerking_icon_visible = {
				has_dynamic_modifier = { modifier = burgerking }
			}

			extreme_poverty_icon_visible = {
				has_dynamic_modifier = { modifier = extreme_poverty }
			}
			poverty_icon_visible = {
				has_dynamic_modifier = { modifier = poverty }
			}
			struggeling_icon_visible = {
				has_dynamic_modifier = { modifier = struggeling }
			}
			middeling_icon_visible = {
				has_dynamic_modifier = { modifier = middeling }
			}
			wealth_icon_visible = {
				has_dynamic_modifier = { modifier = wealth }
			}
			extreme_wealth_icon_visible = {
				has_dynamic_modifier = { modifier = extreme_wealth }
			}

			warning_missing_workers_visible = {
				check_variable = { worker_deficit_k > 0 }
			}

			fire_boni_visible = {
				has_dynamic_modifier = { modifier = fire_nation }
			}
			water_boni_visible = {
				has_dynamic_modifier = { modifier = water_nation }
			}
			earth_boni_visible = {
				has_dynamic_modifier = { modifier = earth_nation }
			}
			air_boni_visible = {
				has_dynamic_modifier = { modifier = air_nation }
			}
			pluralist_boni_visible = {
				has_dynamic_modifier = { modifier = pluralist_nation }
			}

			mil_to_civ_icon_visible = {
				check_variable = { military_ic_transfer > 0 }
			}
			civ_to_mil_icon_visible = {
				check_variable = { military_ic_transfer < 0 }
			}

			farm_construction_click_enabled = {
				check_variable = { num_of_civilian_factories_available_for_projects > 0 }
				check_variable = { modifier@farm_level_max > 0}
				any_controlled_state = {
					set_temp_variable = { farms = building_level@farm }
					add_to_temp_variable = { farms = farm_construction_que }
					check_variable = { field > farms }
				}
			}
			fishing_stand_construction_click_enabled = {
				check_variable = { num_of_civilian_factories_available_for_projects > 0 }
				check_variable = { modifier@fishing_stand_level_max > 0}
				any_controlled_state = {
					set_temp_variable = { fishing_stands = building_level@fishing_stand }
					add_to_temp_variable = { fishing_stands = fishing_stand_construction_que }
					check_variable = { water > fishing_stands }
				}
			}
			ranch_construction_click_enabled = {
				check_variable = { num_of_civilian_factories_available_for_projects > 0 }
				check_variable = { modifier@ranch_level_max > 0}
				any_controlled_state = {
					set_temp_variable = { ranches = building_level@ranch }
					add_to_temp_variable = { ranches = ranch_construction_que }
					check_variable = { animal > ranches }
				}
			}
			lumber_mill_construction_click_enabled = {
				check_variable = { num_of_civilian_factories_available_for_projects > 0 }
				check_variable = { modifier@lumber_mill_level_max > 0}
				any_controlled_state = {
					set_temp_variable = { lumber_mills = building_level@lumber_mill }
					add_to_temp_variable = { lumber_mills = lumber_mill_construction_que }
					check_variable = { forest > lumber_mills }
				}
			}
			quarry_construction_click_enabled = {
				check_variable = { num_of_civilian_factories_available_for_projects > 0 }
				check_variable = { modifier@quarry_level_max > 0}
				any_controlled_state = {
					set_temp_variable = { quarries = building_level@quarry }
					add_to_temp_variable = { quarries = quarry_construction_que }
					check_variable = { stonefield > quarries }
				}
			}
			mine_construction_click_enabled = {
				check_variable = { num_of_civilian_factories_available_for_projects > 0 }
				check_variable = { modifier@mine_level_max > 0}
				any_controlled_state = {
					set_temp_variable = { mines = building_level@mine }
					add_to_temp_variable = { mines = mine_construction_que }
					check_variable = { mountain > mines }
				}
			}

		}

		effects = {

			warning_missing_workers_click = {
				if = {
					limit = {
						any_controlled_state = {
							NOT = { check_variable = { worker_deficit_k > 0 } }
							state = var:PREV.previous_state_checked
						}
					}
					clear_variable = previous_state_checked
				}
				random_controlled_state = {
					limit = {
						check_variable = { worker_deficit_k > 0 }
						NOT = { state = var:PREV.previous_state_checked }
					}
					meta_effect = {
						text = {
							PREV = {
								goto_state = [STATE]
							}
						}
						STATE = "[?THIS.GetID]"
					}
					set_variable = { PREV.previous_state_checked = THIS.id }
				}
				if = {
					limit = {
						var:PREV.previous_state_checked = {
							check_variable = { worker_deficit_k > 0 }
						}
					}
					clear_variable = ROOT.previous_state_checked
				}
			}

			farm_construction_click = {
				add_farm_random = yes
			}
			farm_construction_shift_click = {
				add_farm_random = yes
				add_farm_random = yes
				add_farm_random = yes
				add_farm_random = yes
				add_farm_random = yes
			}

			fishing_stand_construction_click = {
				add_fishing_stand_random = yes
			}
			fishing_stand_construction_shift_click = {
				add_fishing_stand_random = yes
				add_fishing_stand_random = yes
				add_fishing_stand_random = yes
				add_fishing_stand_random = yes
				add_fishing_stand_random = yes
			}
			ranch_construction_click = {
				add_ranch_random = yes
			}
			ranch_construction_shift_click = {
				add_ranch_random = yes
				add_ranch_random = yes
				add_ranch_random = yes
				add_ranch_random = yes
				add_ranch_random = yes
			}
			lumber_mill_construction_click = {
				add_lumber_mill_random = yes
			}
			lumber_mill_construction_shift_click = {
				add_lumber_mill_random = yes
				add_lumber_mill_random = yes
				add_lumber_mill_random = yes
				add_lumber_mill_random = yes
				add_lumber_mill_random = yes
			}
			quarry_construction_click = {
				add_quarry_random = yes
			}
			quarry_construction_shift_click = {
				add_quarry_random = yes
				add_quarry_random = yes
				add_quarry_random = yes
				add_quarry_random = yes
				add_quarry_random = yes
			}
			mine_construction_click = {
				add_mine_random = yes
			}
			mine_construction_shift_click = {
				add_mine_random = yes
				add_mine_random = yes
				add_mine_random = yes
				add_mine_random = yes
				add_mine_random = yes
			}

		}

		properties = {
			large_ratio_bar = {
				frame = ration_ratio_var
			}
			large_sol_bar = {
				frame = wealth_bar
			}
		}

	}
	



	auto_construction_ui = {
		context_type = player_context
		window_name = "auto_construction_ui_window"
		parent_window_token = construction_tab


		triggers = {

			toggle_core_visible = {
				NOT = {
					has_country_flag = core_all_construction_flag
				}
				has_country_flag = auto_construction_interface
			}
			toggle_all_visible = {
				has_country_flag = core_all_construction_flag
				has_country_flag = auto_construction_interface
			}
			
		}

		effects = {

			
			toggle_core_click = {
				ROOT = {
					set_country_flag = core_all_construction_flag
				}
			}
			toggle_all_click = {
				ROOT = {
					clr_country_flag = core_all_construction_flag
				}
			}

		}

	}
	
}
