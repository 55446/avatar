
@AGE_1_COST = 100
@AGE_2_COST = 200
@AGE_3_COST = 300
@AGE_4_COST = 400
@AGE_5_COST = 500
@AGE_6_COST = 600

scripted_gui = {
	research_and_decadence_container = {
		context_type = player_context
		
		window_name = "research_and_decadence"
		parent_window_token = technology_tab
		
		visible = {
			always = yes
		}
		triggers = {
			
		}

		properties = {
			tech_level_bg_strip = {
				frame = tech_age
			}
			tech_level_strip = {
				frame = tech_age
			}
		}
		
		effects = {

			invention_button_click = {
				ROOT = {
					set_country_flag = invention_tab_open
				}
			}

		}

		ai_test_interval = 1200    #50 days
		ai_test_variance = 0.5
		
		ai_enabled = {
			always = yes
		}
		
		ai_max_weight_taken_per_test = 10
		ai_weights = {
			invention_button_click = {
				ai_will_do = {
					base = 0

					modifier = {
						check_variable = { knowledge_variable > 100}
						NOT = {
							has_country_flag = all_inventions_made
						}
						
						add = 100
					}
				}
			}
		}
		
	}

	inventions_window = {
		context_type = player_context
		
		window_name = "inventions_window"
		#parent_window_token = technology_tab
		
		visible = {
			has_country_flag = invention_tab_open
		}
		
		triggers = {
			age_1_glow_visible = { check_variable = { tech_age_complete_1 > 0 } }
			age_2_glow_visible = { check_variable = { tech_age_complete_2 > 0 } }
			age_3_glow_visible = { check_variable = { tech_age_complete_3 > 0 } }
			age_4_glow_visible = { check_variable = { tech_age_complete_4 > 0 } }
			age_5_glow_visible = { check_variable = { tech_age_complete_5 > 0 } }
			age_6_glow_visible = { check_variable = { tech_age_complete_6 > 0 } }

			age_1_lock_visible = { always = no }
			age_2_lock_visible = { check_variable = { tech_age < 2 } }
			age_3_lock_visible = { check_variable = { tech_age < 3 } }
			age_4_lock_visible = { check_variable = { tech_age < 4 } }
			age_5_lock_visible = { check_variable = { tech_age < 5 } }
			age_6_lock_visible = { check_variable = { tech_age < 6 } }

			measurements_1_visible = { AND = { not = { has_tech = measurements } check_variable = { tech_age < 1 } } }
			measurements_2_click_enabled = { not = { has_tech = measurements } 
				check_variable = { knowledge_variable > @AGE_1_COST }
			}
			measurements_2_visible = { not = { has_tech = measurements } }
			measurements_3_visible = { has_tech = measurements }

			gravity_1_visible = { AND = { not = { has_tech = gravity } check_variable = { tech_age < 1 } } }
			gravity_2_click_enabled = { not = { has_tech = gravity } 
				check_variable = { knowledge_variable > @AGE_1_COST }
			}
			gravity_2_visible = { not = { has_tech = gravity } }
			gravity_3_visible = { has_tech = gravity }

			smelting_1_visible = { AND = { not = { has_tech = smelting } check_variable = { tech_age < 1 } } }
			smelting_2_click_enabled = { not = { has_tech = smelting } 
				check_variable = { knowledge_variable > @AGE_1_COST }
			}
			smelting_2_visible = { not = { has_tech = smelting } }
			smelting_3_visible = { has_tech = smelting }

			domestication_1_visible = { AND = { not = { has_tech = domestication } check_variable = { tech_age < 1 } } }
			domestication_2_click_enabled = { not = { has_tech = domestication } 
				check_variable = { knowledge_variable > @AGE_1_COST }
			}
			domestication_2_visible = { not = { has_tech = domestication } }
			domestication_3_visible = { has_tech = domestication }

			metaphysics_1_visible = { AND = { not = { has_tech = metaphysics } check_variable = { tech_age < 1 } } }
			metaphysics_2_click_enabled = { not = { has_tech = metaphysics } 
				check_variable = { knowledge_variable > @AGE_1_COST }
			}
			metaphysics_2_visible = { not = { has_tech = metaphysics } }
			metaphysics_3_visible = { has_tech = metaphysics }




			geometry_1_visible = { AND = { not = { has_tech = geometry } check_variable = { tech_age < 2 } } }
			geometry_2_click_enabled = { not = { has_tech = geometry } 
				check_variable = { knowledge_variable > @AGE_2_COST }
			}
			geometry_2_visible = { not = { has_tech = geometry } }
			geometry_3_visible = { has_tech = geometry }

			astronomy_1_visible = { AND = { not = { has_tech = astronomy } check_variable = { tech_age < 2 } } }
			astronomy_2_click_enabled = { not = { has_tech = astronomy } 
				check_variable = { knowledge_variable > @AGE_2_COST }
			}
			astronomy_2_visible = { not = { has_tech = astronomy } }
			astronomy_3_visible = { has_tech = astronomy }

			alchemy_1_visible = { AND = { not = { has_tech = alchemy } check_variable = { tech_age < 2 } } }
			alchemy_2_click_enabled = { not = { has_tech = alchemy } 
				check_variable = { knowledge_variable > @AGE_2_COST }
			}
			alchemy_2_visible = { not = { has_tech = alchemy } }
			alchemy_3_visible = { has_tech = alchemy }

			agriculture_1_visible = { AND = { not = { has_tech = agriculture } check_variable = { tech_age < 2 } } }
			agriculture_2_click_enabled = { not = { has_tech = agriculture } 
				check_variable = { knowledge_variable > @AGE_2_COST }
			}
			agriculture_2_visible = { not = { has_tech = agriculture } }
			agriculture_3_visible = { has_tech = agriculture }

			writing_1_visible = { AND = { not = { has_tech = writing } check_variable = { tech_age < 2 } } }
			writing_2_click_enabled = { not = { has_tech = writing } 
				check_variable = { knowledge_variable > @AGE_2_COST }
			}
			writing_2_visible = { not = { has_tech = writing } }
			writing_3_visible = { has_tech = writing }



			arithmetics_1_visible = { AND = { not = { has_tech = arithmetics } check_variable = { tech_age < 3 } } }
			arithmetics_2_click_enabled = { not = { has_tech = arithmetics } 
				check_variable = { knowledge_variable > @AGE_3_COST }
			}
			arithmetics_2_visible = { not = { has_tech = arithmetics } }
			arithmetics_3_visible = { has_tech = arithmetics }

			thermodynamics_1_visible = { AND = { not = { has_tech = thermodynamics } check_variable = { tech_age < 3 } } }
			thermodynamics_2_click_enabled = { not = { has_tech = thermodynamics } 
				check_variable = { knowledge_variable > @AGE_3_COST }
			}
			thermodynamics_2_visible = { not = { has_tech = thermodynamics } }
			thermodynamics_3_visible = { has_tech = thermodynamics }

			conservation_of_mass_1_visible = { AND = { not = { has_tech = conservation_of_mass } check_variable = { tech_age < 3 } } }
			conservation_of_mass_2_click_enabled = { not = { has_tech = conservation_of_mass } 
				check_variable = { knowledge_variable > @AGE_3_COST }
			}
			conservation_of_mass_2_visible = { not = { has_tech = conservation_of_mass } }
			conservation_of_mass_3_visible = { has_tech = conservation_of_mass }

			botanics_1_visible = { AND = { not = { has_tech = botanics } check_variable = { tech_age < 3 } } }
			botanics_2_click_enabled = { not = { has_tech = botanics } 
				check_variable = { knowledge_variable > @AGE_3_COST }
			}
			botanics_2_visible = { not = { has_tech = botanics } }
			botanics_3_visible = { has_tech = botanics }

			natural_philosophy_1_visible = { AND = { not = { has_tech = natural_philosophy } check_variable = { tech_age < 3 } } }
			natural_philosophy_2_click_enabled = { not = { has_tech = natural_philosophy } 
				check_variable = { knowledge_variable > @AGE_3_COST }
			}
			natural_philosophy_2_visible = { not = { has_tech = natural_philosophy } }
			natural_philosophy_3_visible = { has_tech = natural_philosophy }



			statistics_1_visible = { AND = { not = { has_tech = statistics } check_variable = { tech_age < 4 } } }
			statistics_2_click_enabled = { not = { has_tech = statistics } 
				check_variable = { knowledge_variable > @AGE_4_COST }
			}
			statistics_2_visible = { not = { has_tech = statistics } }
			statistics_3_visible = { has_tech = statistics }

			aerodynamics_1_visible = { AND = { not = { has_tech = aerodynamics } check_variable = { tech_age < 4 } } }
			aerodynamics_2_click_enabled = { not = { has_tech = aerodynamics } 
				check_variable = { knowledge_variable > @AGE_4_COST }
			}
			aerodynamics_2_visible = { not = { has_tech = aerodynamics } }
			aerodynamics_3_visible = { has_tech = aerodynamics }

			thermochemistry_1_visible = { AND = { not = { has_tech = thermochemistry } check_variable = { tech_age < 4 } } }
			thermochemistry_2_click_enabled = { not = { has_tech = thermochemistry } 
				check_variable = { knowledge_variable > @AGE_4_COST }
			}
			thermochemistry_2_visible = { not = { has_tech = thermochemistry } }
			thermochemistry_3_visible = { has_tech = thermochemistry }

			heal_practices_1_visible = { AND = { not = { has_tech = heal_practices } check_variable = { tech_age < 4 } } }
			heal_practices_2_click_enabled = { not = { has_tech = heal_practices } 
				check_variable = { knowledge_variable > @AGE_4_COST }
			}
			heal_practices_2_visible = { not = { has_tech = heal_practices } }
			heal_practices_3_visible = { has_tech = heal_practices }

			printing_press_1_visible = { AND = { not = { has_tech = printing_press } check_variable = { tech_age < 4 } } }
			printing_press_2_click_enabled = { not = { has_tech = printing_press } 
				check_variable = { knowledge_variable > @AGE_4_COST }
			}
			printing_press_2_visible = { not = { has_tech = printing_press } }
			printing_press_3_visible = { has_tech = printing_press }



			applied_mathematics_1_visible = { AND = { not = { has_tech = applied_mathematics } check_variable = { tech_age < 5 } } }
			applied_mathematics_2_click_enabled = { not = { has_tech = applied_mathematics } 
				check_variable = { knowledge_variable > @AGE_5_COST }
			}
			applied_mathematics_2_visible = { not = { has_tech = applied_mathematics } }
			applied_mathematics_3_visible = { has_tech = applied_mathematics }

			engines_1_visible = { AND = { not = { has_tech = engines } check_variable = { tech_age < 5 } } }
			engines_2_click_enabled = { not = { has_tech = engines } 
				check_variable = { knowledge_variable > @AGE_5_COST }
			}
			engines_2_visible = { not = { has_tech = engines } }
			engines_3_visible = { has_tech = engines }

			atomic_theory_1_visible = { AND = { not = { has_tech = atomic_theory } check_variable = { tech_age < 5 } } }
			atomic_theory_2_click_enabled = { not = { has_tech = atomic_theory } 
				check_variable = { knowledge_variable > @AGE_5_COST }
			}
			atomic_theory_2_visible = { not = { has_tech = atomic_theory } }
			atomic_theory_3_visible = { has_tech = atomic_theory }

			genetics_1_visible = { AND = { not = { has_tech = genetics } check_variable = { tech_age < 5 } } }
			genetics_2_click_enabled = { not = { has_tech = genetics } 
				check_variable = { knowledge_variable > @AGE_5_COST }
			}
			genetics_2_visible = { not = { has_tech = genetics } }
			genetics_3_visible = { has_tech = genetics }

			scientific_method_1_visible = { AND = { not = { has_tech = scientific_method } check_variable = { tech_age < 5 } } }
			scientific_method_2_click_enabled = { not = { has_tech = scientific_method } 
				check_variable = { knowledge_variable > @AGE_5_COST }
			}
			scientific_method_2_visible = { not = { has_tech = scientific_method } }
			scientific_method_3_visible = { has_tech = scientific_method }



			abstract_mathematics_1_visible = { AND = { not = { has_tech = abstract_mathematics } check_variable = { tech_age < 6 } } }
			abstract_mathematics_2_click_enabled = { not = { has_tech = abstract_mathematics } 
				check_variable = { knowledge_variable > @AGE_6_COST }
			}
			abstract_mathematics_2_visible = { not = { has_tech = abstract_mathematics } }
			abstract_mathematics_3_visible = { has_tech = abstract_mathematics }

			electromagnetism_1_visible = { AND = { not = { has_tech = electromagnetism } check_variable = { tech_age < 6 } } }
			electromagnetism_2_click_enabled = { not = { has_tech = electromagnetism } 
				check_variable = { knowledge_variable > @AGE_6_COST }
			}
			electromagnetism_2_visible = { not = { has_tech = electromagnetism } }
			electromagnetism_3_visible = { has_tech = electromagnetism }

			periodic_table_1_visible = { AND = { not = { has_tech = periodic_table } check_variable = { tech_age < 6 } } }
			periodic_table_2_click_enabled = { not = { has_tech = periodic_table } 
				check_variable = { knowledge_variable > @AGE_6_COST }
			}
			periodic_table_2_visible = { not = { has_tech = periodic_table } }
			periodic_table_3_visible = { has_tech = periodic_table }

			biochemistry_1_visible = { AND = { not = { has_tech = biochemistry } check_variable = { tech_age < 6 } } }
			biochemistry_2_click_enabled = { not = { has_tech = biochemistry } 
				check_variable = { knowledge_variable > @AGE_6_COST }
			}
			biochemistry_2_visible = { not = { has_tech = biochemistry } }
			biochemistry_3_visible = { has_tech = biochemistry }

			social_sience_1_visible = { AND = { not = { has_tech = social_sience } check_variable = { tech_age < 6 } } }
			social_sience_2_click_enabled = { not = { has_tech = social_sience } 
				check_variable = { knowledge_variable > @AGE_6_COST }
			}
			social_sience_2_visible = { not = { has_tech = social_sience } }
			social_sience_3_visible = { has_tech = social_sience }

		}

		effects = {

			close_button_click = {
				ROOT = {
					clr_country_flag = invention_tab_open
				}
			}

			measurements_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_1_COST }
				set_technology = {
					measurements = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			gravity_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_1_COST }
				set_technology = {
					gravity = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			smelting_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_1_COST }
				set_technology = {
					smelting = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			domestication_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_1_COST }
				set_technology = {
					domestication = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			metaphysics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_1_COST }
				set_technology = {
					metaphysics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}


			geometry_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_2_COST }
				set_technology = {
					geometry = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			astronomy_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_2_COST }
				set_technology = {
					astronomy = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			alchemy_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_2_COST }
				set_technology = {
					alchemy = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			agriculture_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_2_COST }
				set_technology = {
					agriculture = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			writing_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_2_COST }
				set_technology = {
					writing = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}


			arithmetics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_3_COST }
				set_technology = {
					arithmetics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			thermodynamics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_3_COST }
				set_technology = {
					thermodynamics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			conservation_of_mass_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_3_COST }
				set_technology = {
					conservation_of_mass = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			botanics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_3_COST }
				set_technology = {
					botanics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			natural_philosophy_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_3_COST }
				set_technology = {
					natural_philosophy = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}


			statistics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_4_COST }
				set_technology = {
					statistics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			aerodynamics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_4_COST }
				set_technology = {
					aerodynamics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			thermochemistry_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_4_COST }
				set_technology = {
					thermochemistry = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			heal_practices_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_4_COST }
				set_technology = {
					heal_practices = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			printing_press_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_4_COST }
				set_technology = {
					printing_press = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}


			applied_mathematics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_5_COST }
				set_technology = {
					applied_mathematics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			engines_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_5_COST }
				set_technology = {
					engines = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			atomic_theory_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_5_COST }
				set_technology = {
					atomic_theory = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			genetics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_5_COST }
				set_technology = {
					genetics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			scientific_method_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_5_COST }
				set_technology = {
					scientific_method = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			


			abstract_mathematics_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_6_COST }
				set_technology = {
					abstract_mathematics = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			electromagnetism_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_6_COST }
				set_technology = {
					electromagnetism = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			periodic_table_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_6_COST }
				set_technology = {
					periodic_table = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			biochemistry_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_6_COST }
				set_technology = {
					biochemistry = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			social_sience_2_click = {
				subtract_from_variable = { knowledge_variable = @AGE_6_COST }
				set_technology = {
					social_sience = 1
				}
				#country_event = invention.1
				recalculate_age = yes
			}
			
		}
		ai_enabled = { #Teaching the AI how to invent: Attempt 2
			always = yes 
		}
		ai_test_interval = 12 #0.5 days, to close the window quickly
		ai_test_variance = 0.5

		ai_weights = {
			domestication_0_2_click = {
				ai_will_do = {factor = 80}
			}
			domestication_1_2_click = {
				ai_will_do = {factor = 80}
			}
			domestication_2_2_click = {
				ai_will_do = {factor = 80}
			}
			the_wheel_2_click = {
				ai_will_do = {factor = 80}
			}
			basic_gear_2_click = {
				ai_will_do = {factor = 80}
			}
			advanced_gear_2_click = {
				ai_will_do = {factor = 80}
			}
			steam_engine_2_click = {
				ai_will_do = {factor = 80}
			}
			improved_coal_engine_2_click = {
				ai_will_do = {factor = 80}
			}
			modern_engine_2_click = {
				ai_will_do = {factor = 80}
			}	
			aerodynamics_2_click = {
				ai_will_do = {factor = 80}
			}
			thermodynamics_2_click = {
				ai_will_do = {factor = 80}
			}
			candles_2_click = {
				ai_will_do = {factor = 80}
			}
			ink_2_click = {
				ai_will_do = {factor = 80}
			}
			libraries_2_click = {
				ai_will_do = {factor = 80}
			}
			basic_tool_making_2_click ={
				ai_will_do = {factor = 80}
			}
			metal_processing_2_click = {
				ai_will_do = {factor = 80}
			}
			steelmaking_2_click = {
				ai_will_do = {factor = 80}
			}
			plow_2_click = {
				ai_will_do = {factor = 80}
			}
			botanics_2_click = {
				ai_will_do = {factor = 80}
			}
			heal_practices_2_click = {
				ai_will_do = {factor = 80}
			}

			close_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						check_variable = { knowledge_variable < 100}

						add = 100
					}
				}
			}
		}
		
	}

}
